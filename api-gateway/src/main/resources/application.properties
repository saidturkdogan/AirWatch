# Mevcut yap?land?rman?z
server.port=8080
spring.application.name=api-gateway

# Air Quality servisine yönlendirme kural?
spring.cloud.gateway.routes[0].id=air-quality-service
spring.cloud.gateway.routes[0].uri=http://localhost:8081
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/air-quality/**
spring.cloud.gateway.routes[0].filters[0]=CircuitBreaker=airQualityCircuitBreaker

# OpenAPI docs için yönlendirme kural?
spring.cloud.gateway.routes[1].id=air-quality-openapi
spring.cloud.gateway.routes[1].uri=http://localhost:8081
spring.cloud.gateway.routes[1].predicates[0]=Path=/api-docs/**
spring.cloud.gateway.routes[1].filters[0]=RewritePath=/api-docs(?<segment>/?.*),/api-docs${segment}
spring.cloud.gateway.routes[1].filters[1]=CircuitBreaker=airQualityCircuitBreaker,fallbackUri=forward:/fallback/api-docs

# Circuit Breaker yap?land?rmas?
spring.cloud.circuitbreaker.resilience4j.enabled=true

# Fallback endpoint
spring.cloud.gateway.routes[2].id=fallback-api-docs
spring.cloud.gateway.routes[2].uri=forward:/fallback/api-docs
spring.cloud.gateway.routes[2].predicates[0]=Path=/fallback/api-docs

# Swagger yap?land?rmas?
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui/index.html
springdoc.info.title=API Gateway
springdoc.info.description=API Gateway for AirWatch project
springdoc.info.version=1.0.0

# Swagger UI için air-quality servisinin OpenAPI spesifikasyonunu tan?t
springdoc.swagger-ui.urls[0].name=air-quality-service
springdoc.swagger-ui.urls[0].url=/api-docs

# Log seviyesini art?r
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.org.springdoc=DEBUG